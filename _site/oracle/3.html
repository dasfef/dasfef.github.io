<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- <meta name="description" content="dasfefì˜ ê°œë°œì·¨ì—…ë‚œì¤‘ì¼ê¸°"> -->
  <meta name="keywords" content="C,C++,C#,Python,Java,Arduino,Javascript,Oracle,Machine Learning,dev,íŒŒì´ì¬,ìë°”,ì•„ë‘ì´ë…¸,ìë°”ìŠ¤í¬ë¦½íŠ¸,ì˜¤ë¼í´,ë¨¸ì‹ ëŸ¬ë‹,AI">
  <title>
    [ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ 
  </title>
  <!-- : dasfef -->
  
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <script type="text/javascript" src=""></script>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ | dasfef</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="dasfefì˜ ê°œë°œì·¨ì—…ë‚œì¤‘ì¼ê¸°" />
<meta property="og:description" content="dasfefì˜ ê°œë°œì·¨ì—…ë‚œì¤‘ì¼ê¸°" />
<link rel="canonical" href="http://localhost:4000/oracle/3" />
<meta property="og:url" content="http://localhost:4000/oracle/3" />
<meta property="og:site_name" content="dasfef" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"dasfefì˜ ê°œë°œì·¨ì—…ë‚œì¤‘ì¼ê¸°","headline":"[ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜","url":"http://localhost:4000/oracle/3"}</script>
<!-- End Jekyll SEO tag -->


</head>


  <body class="small">

    <header>
  <div class="menu">
    <ul>
      <li class="page_title">[ì˜¤ë¼í´] PL/SQL í™œìš© procedure, trigger, ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜</li>
<li><a href="/home">/HOME</a></li>
<li><a href="/posts">/POSTS</a></li>
<li><a href="/portfolio">/PORTFOLIO</a></li>
<li><a href="/about">/ABOUT</a></li>
</ul>
  </div>
</header>


    <p style="text-align:right; font-weight:bold;">2023.03.23</p>
<p><br>
sql ì—ëŠ” pl/sql ì´ë€ê²ƒì´ ìˆë‹¤
procedural language ë€ ê²ƒì¸ë°
ì´ì „ êµìœ¡ì—ëŠ” ë°°ìš°ì§€ ëª»í•œ ê²ƒì´ ë‚˜ì˜¤ë‹ˆ
ë‹¹í™©ìŠ¤ëŸ½ê¸°ë„ í•˜ê³  ìƒˆë¡­ê¸°ë„ í–ˆë‹¤
<br></p>
<p style="font-size:24px; font-weight:bold"><span style="background-color:#007433; color:#ffd300;">1. PROCEDURE</span></p>
<!-- â€‹<br> -->
<p>êµ¬ë¬¸ë§Œ ë³´ìë©´ ì•„ë˜ì™€ ê°™ë‹¤</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">or</span> <span class="k">REPLACE</span> <span class="k">PROCEDURE</span> <span class="n">INSERTBOOK</span> <span class="p">(</span>
    <span class="n">MYBOOKID</span> <span class="k">in</span> <span class="n">number</span><span class="p">,</span>
    <span class="n">MYBOOKNAME</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">,</span>
    <span class="n">MYPUBLISHER</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">,</span>
    <span class="n">MYPRICE</span> <span class="k">in</span> <span class="n">number</span><span class="p">)</span>
<span class="k">as</span>
<span class="k">begin</span>
    <span class="k">insert</span> <span class="k">into</span> <span class="n">book</span><span class="p">(</span><span class="n">bookid</span><span class="p">,</span> <span class="n">bookname</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
    <span class="k">values</span><span class="p">(</span><span class="n">mybookid</span><span class="p">,</span> <span class="n">mybookname</span><span class="p">,</span> <span class="n">mypublisher</span><span class="p">,</span> <span class="n">myprice</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div>

<p>create or replace ë‹¤ìŒ procedure ë¥¼ ë¶™ì´ê³ 
ì¡°ê±´ì— ë§Œì¡±í•˜ëŠ” êµ¬ë¬¸ì„ ì‘ì„±í•´ì£¼ë©´ ë˜ëŠ”ë°
ê·¼ ëª‡ê°œì›”ë™ì•ˆ select * from ~ ë§Œ ì“°ë‹¤ê°€
ì´ëŸ° êµ¬ë¬¸ì„ ë§ë‹¥ëœ¨ë¦¬ë‹ˆ ì¶©ê²©ìœ¼ë¡œ ë‹¤ê°€ì™”ë‹¤</p>

<p>ë‚´ê°€ ì•Œê³  ìˆë˜ sql ì´ ë‹¤ê°€ ì•„ë‹ˆêµ¬ë‚˜ ğŸ˜‚</p>

<p>ìœ„ ë‚´ìš©ì„ ì°¨ë¡€ë¡œ ë¶„ì„í•´ë³´ì</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">procedure</span> <span class="n">INSERTBOOK</span> <span class="p">(</span>                    <span class="o">//</span> <span class="k">procedure</span> <span class="err">êµ¬ë¬¸</span> <span class="err">ìƒì„±</span>
<span class="n">MYBOOKID</span> <span class="k">in</span> <span class="n">number</span><span class="p">,</span>                                         <span class="o">//</span> <span class="n">number</span> <span class="err">ë¡œ</span> <span class="err">ëœ</span> <span class="n">MYBOOKID</span>
<span class="n">MYBOOKNAME</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">,</span>                                     <span class="o">//</span> <span class="n">varchar2</span> <span class="err">ë¡œ</span> <span class="err">ëœ</span> <span class="n">MYBOOKNAME</span>
<span class="n">MYPUBLISHER</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">,</span>                                    <span class="o">//</span> <span class="n">varchar2</span> <span class="err">ë¡œ</span> <span class="err">ëœ</span> <span class="n">MYPUBLISHER</span>
<span class="n">MYPRICE</span> <span class="k">in</span> <span class="n">number</span><span class="p">)</span>                                          <span class="o">//</span> <span class="n">number</span> <span class="err">ë¡œ</span> <span class="err">ëœ</span> <span class="n">MYPRICE</span>
<span class="k">as</span>
<span class="k">begin</span>
    <span class="k">insert</span> <span class="k">into</span> <span class="n">book</span><span class="p">(</span><span class="n">bookid</span><span class="p">,</span> <span class="n">bookname</span><span class="p">,</span> <span class="n">publisher</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>    <span class="o">//</span> <span class="k">procedure</span> <span class="err">ê°€</span> <span class="err">ì‹¤í–‰ë˜ë©´</span> <span class="err">í•´ë‹¹</span> <span class="err">ì—´</span> <span class="k">insert</span>
    <span class="k">values</span><span class="p">(</span><span class="n">mybookid</span><span class="p">,</span> <span class="n">mybookname</span><span class="p">,</span> <span class="n">mypublisher</span><span class="p">,</span> <span class="n">myprice</span><span class="p">);</span>     <span class="o">//</span> <span class="err">í•´ë‹¹</span> <span class="err">ì—´ë“¤ì˜</span> <span class="n">value</span>
<span class="k">end</span><span class="p">;</span>
<span class="err">â€‹</span><span class="o">/</span>
</code></pre></div></div>
<p>ì¦‰ procedure ê°€ ì‹¤í–‰ë˜ë©´
ì„ì˜ë¡œ ë§Œë“¤ì–´ ë‘” procedure ë‚´ì˜ ì—´ë“¤ì—
insert êµ¬ë¬¸ì„ begin í•˜ë¼ëŠ” ê²ƒì´ë‹¤</p>

<p>ì˜ì–´ë¥¼ í•´ì„ë§Œ í•˜ë©´ ì–¼ì¶” ë‚´ìš©ì´ ì´í•´ê°€ ê°„ë‹¤
<br>
procedure ì˜ ì‹¤í–‰ì€ ì•„ë˜ì™€ ê°™ë‹¤</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">exec</span> <span class="n">insertbook</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'ìŠ¤í¬ì¸ ê³¼í•™'</span><span class="p">,</span> <span class="s1">'ê³¼í•™ì„œì '</span><span class="p">,</span> <span class="mi">25000</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">book</span><span class="p">;</span>
</code></pre></div></div>
<p>exec ì„ í†µí•´ procedure ì˜ ì´ë¦„ê³¼
í•´ë‹¹ procedure ì— í•„ìš”í•œ value ë¥¼ ë„£ì–´ì£¼ë©´ ë!</p>

<p>select * from ~ ìœ¼ë¡œ í…Œì´ë¸”ì—
ë‚´ê°€ ì›í•˜ëŠ” ê°’ë“¤ì´ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•´ë³´ì</p>

<p>ì´ëŸ° procedure ëŠ”
select ~ êµ¬ë¬¸ì„ ì“°ì§€ ì•Šì•„ë„
ë°”ë¡œ ê°’ì„ ì¶œë ¥í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œë„ ì“¸ ìˆ˜ ìˆë‹¤</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">procedure</span> <span class="n">AVERAGEPRICE</span><span class="p">(</span>
    <span class="n">AVERAGEVAL</span> <span class="k">out</span> <span class="n">number</span><span class="p">)</span>
<span class="k">as</span>
<span class="k">begin</span>
    <span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="k">into</span> <span class="n">AVERAGEVAL</span> <span class="k">from</span> <span class="n">book</span> 
    <span class="k">where</span> <span class="n">price</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>

<span class="k">set</span> <span class="n">serveroutput</span> <span class="k">on</span><span class="p">;</span>
<span class="k">declare</span>
    <span class="n">AVERAGEVAL</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="k">begin</span>
    <span class="n">AVERAGEPRICE</span><span class="p">(</span><span class="n">AVERAGEVAL</span><span class="p">);</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'ì±…ê°’ í‰ê·  : '</span><span class="o">||</span><span class="n">AVERAGEVAL</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="err">â€‹</span><span class="o">/</span>
</code></pre></div></div>
<p>procedure ë„ ì²˜ìŒë³´ëŠ”ë°
AVERAGEVAL ì˜†ì˜ out ë„ ì²˜ìŒë³¸ë‹¤</p>

<p>ì´ out ì€
ë³´í†µ ìš°ë¦¬ê°€ í…Œì´ë¸”ì„ ë§Œë“¤ ë•Œ
CREATE TABLE IN system ì²˜ëŸ¼
in ì„ ì“°ì§€ë§Œ ìƒëµí•˜ê³  ì“°ê¸°ë„ í•˜ëŠ”ë°
ì—¬ê¸°ì„œì˜ in ì€ ìë£Œì˜ â€˜ì•ˆâ€™ì— ë„£ëŠ”ê²ƒì´ë‹¤</p>

<p>ì´í•´ê°€ ê°€ì§€ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì— 
DBMS_OUTPUT.PUT_LINE êµ¬ë¬¸ê³¼
í•¨ê»˜ ì‚´í´ë³´ì</p>

<p>ìœ„ procedure ë¥¼ ì‹¤í–‰í•´ë³´ê³ 
set serveroutput on; ì„ ê¼­ ì‹¤í–‰í•´ì£¼ì–´ì•¼ í•œë‹¤
ê·¸ë¦¬ê³ 
DBMS_OUTPUT.PUT_LINE ì„ ì‹¤í–‰í•´ë³´ë©´</p>

<p>â€‹<figure style="text-align:center;">
<img class="image" src="../contents/imgs/oracle_3/1.png">
</figure></p>

<p>ì´ëŸ°ì‹ìœ¼ë¡œ ìš°ë¦¬ê°€ ì§ì ‘ 
select ~ ì–´ì©Œêµ¬ í•´ì„œ í‰ê· ê°’ì„ êµ¬í•´ì£¼ì§€ ì•Šì•„ë„
ë°”ë¡œ í‰ê· ì„ êµ¬í•´ì£¼ëŠ” êµ¬ë¬¸ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆë‹¤</p>

<p>ê·¸ëŸ°ë° ë§Œì•½</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">procedure</span> <span class="n">AVERAGEPRICE</span><span class="p">(</span>
    <span class="n">AVERAGEVAL</span> <span class="k">out</span> <span class="n">number</span><span class="p">)</span>
</code></pre></div></div>
<p>ì—¬ê¸°ì„œ out ì´ ì•„ë‹Œ in ì„ ì“´ë‹¤ë©´
ì˜¤ë¥˜ê°€ ìƒê¸°ê¸°ë„ í•˜ì§€ë§Œ
ì˜¤ë¥˜ ì—†ì´ ë„˜ì–´ê°„ë‹¤ í•œë“¤</p>

<p>â€‹<figure style="text-align:center;">
<img class="image" src="../contents/imgs/oracle_3/2.png">
</figure></p>

<p>ìš” ì—ì„œ ì›í•˜ëŠ” ì±…ê°’ í‰ê· ì—ëŠ”
ê°’ì´ ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ”ë‹¤</p>

<p>ì¦‰, out ì€ ì´ì²˜ëŸ¼ â€˜ë°–â€™ìœ¼ë¡œ ì¶œë ¥ì„ ì›í•  ë•Œ,
in ì€ â€˜ì•ˆâ€™ì—ì„œ ìë£Œ ì •ë¦¬ë¥¼ ì›í•  ë•Œ ì“´ë‹¤</p>

<p><span style="color:orange">* in out ì„ ê°™ì´ ì¨ì£¼ë©´ ëª¨ë‘ ê°€ëŠ¥</span>
<br></p>
<p style="font-size:24px; font-weight:bold"><span style="background-color:#007433; color:#ffd300;">2. CURSOR</span></p>

<p>íŒŒì´ì¬ì—ì„œ DBì— ì ‘ì†í•˜ê³ 
sql ì„ í†µí•´ ìë£Œë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ
ì»¤ì„œë¥¼ ë§ì´ ì ‘í•´ë´¤ë‹¤</p>

<p>conn.cursor
cursor.fetchall()</p>

<p>ë“±ìœ¼ë¡œ ë§ì´ í™œìš©í–ˆë‹¤</p>

<p>ì»¤ì„œëŠ” ìš°ë¦¬ê°€ í‰ì†Œì— ì“°ëŠ” ë§ì²˜ëŸ¼
ê¹œë°•ì´ëŠ” ì»¤ì„œë¥¼ ì—°ìƒí•˜ë©´ ì´í•´ê°€ ì‰½ë‹¤</p>

<p>í˜„ì¬ ì–´ë–¤ íŠœí”Œì— ì»¤ì„œê°€ ìœ„ì¹˜í•´ìˆê³ 
í•´ë‹¹ ì»¤ì„œì— ì–´ë–¤ ëª…ë ¹ì„ ì…ë ¥í•˜ëŠëƒ ì¸ê²ƒê°™ë‹¤</p>

<p>â€‹</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">procedure</span> <span class="n">INTEREST</span> 
<span class="k">as</span>
    <span class="n">MYINTEREST</span> <span class="nb">NUMERIC</span><span class="p">;</span>
    <span class="n">PRICE</span> <span class="nb">NUMERIC</span><span class="p">;</span>
    <span class="k">cursor</span> <span class="n">INTERESTCURSOR</span> <span class="k">is</span> <span class="k">select</span> <span class="n">saleprice</span> <span class="k">from</span> <span class="n">orders</span><span class="p">;</span>      <span class="o">//</span> <span class="err">ì»¤ì„œì—</span> <span class="err">ì–´ë–¤</span> <span class="k">sql</span> <span class="err">ì„</span> <span class="err">ë¶ˆëŸ¬ì¤„ì§€</span> <span class="err">ì„¤ì •</span>
<span class="k">begin</span>
    <span class="n">myinterest</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">open</span> <span class="n">interestcursor</span><span class="p">;</span>                                        <span class="o">//</span> <span class="k">open</span> <span class="k">cursor</span>
    <span class="n">loop</span>
        <span class="k">fetch</span> <span class="n">interestcursor</span> <span class="k">into</span> <span class="n">price</span><span class="p">;</span>
        <span class="n">exit</span> <span class="k">when</span> <span class="n">interestcursor</span><span class="o">%</span><span class="n">notfound</span><span class="p">;</span>
        <span class="n">if</span> <span class="n">price</span> <span class="o">&gt;=</span> <span class="mi">30000</span> <span class="k">then</span>
            <span class="n">myinterest</span> <span class="p">:</span><span class="o">=</span> <span class="n">myinterest</span> <span class="o">+</span> <span class="n">price</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="n">myinterest</span> <span class="p">:</span><span class="o">=</span> <span class="n">myinterest</span> <span class="o">+</span> <span class="n">price</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="p">;</span>
        <span class="k">end</span> <span class="n">if</span><span class="p">;</span>
    <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
    <span class="k">close</span> <span class="n">interestcursor</span><span class="p">;</span>                                       <span class="o">//</span> <span class="k">close</span> <span class="k">cursor</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'ì „ì²´ ì´ìµ ê¸ˆì•¡ = '</span><span class="o">||</span><span class="n">myinterest</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">set</span> <span class="n">serveroutput</span> <span class="k">on</span><span class="p">;</span>
<span class="k">exec</span> <span class="n">interest</span><span class="p">;</span>
</code></pre></div></div>
<p><br></p>
<p style="font-size:24px; font-weight:bold;"><span style="background-color:#007433; color:#ffd300">3. TRIGGER</span></p>

<p>íŠ¸ë¦¬ê±°ëŠ” ì–´ë–¤ êµ¬ë¬¸ì´ ìˆ˜í–‰ ë˜ì—ˆì„ ë•Œ
ë”°ë¼ ê°€ê²Œë˜ëŠ” ìˆ˜í–‰êµ¬ë¬¸ì´ë‹¤</p>

<p>ë¬´ì–¸ê°€ ê±´ë“œë ¸ì„ ë•Œ ë°œë™ë˜ëŠ” ë«ì„ ì—°ìƒí•˜ë©´
ì´í•´ê°€ ì‰¬ìš¸ê²ƒ ê°™ë‹¤</p>

<p>íŠ¸ë¦¬ê±°ì—ëŠ” before ì™€ after ê°€ ìˆëŠ”ë°
after ë¥¼ í†µí•œ ë¡œê·¸ ìë£Œ ê¸°ì… êµ¬ë¬¸ì„ ì‚´í´ë³´ì</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- trigger ì‹¤ìŠµ ìœ„í•œ í…Œì´ë¸” ìƒì„±</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">book_log</span> <span class="p">(</span>
    <span class="n">BOOKID_1</span> <span class="n">NUMBER</span><span class="p">,</span>
    <span class="n">BOOKNAME_1</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">PUBLISHER_1</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">PRICE_1</span> <span class="n">NUMBER</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">AFTERINSERTBOOK</span>                             <span class="o">//</span> <span class="err">íŠ¸ë¦¬ê±°</span> <span class="err">ì„¤ì •</span>
<span class="k">after</span> <span class="k">insert</span> <span class="k">on</span> <span class="n">book</span> <span class="k">for</span> <span class="k">each</span> <span class="k">row</span>                                     <span class="o">//</span> <span class="err">íŠ¸ë¦¬ê±°</span> <span class="err">ë°œë™</span> <span class="err">ì¡°ê±´</span>
<span class="k">declare</span>
    <span class="n">average</span> <span class="n">number</span><span class="p">;</span>
<span class="k">begin</span> 
    <span class="k">insert</span> <span class="k">into</span> <span class="n">BOOK_LOG</span>
    <span class="k">values</span><span class="p">(:</span><span class="k">new</span><span class="p">.</span><span class="n">bookid</span><span class="p">,</span> <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">bookname</span><span class="p">,</span> <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">publisher</span><span class="p">,</span> <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">price</span><span class="p">);</span>
    <span class="n">DBMS_OUTPUT</span><span class="p">.</span><span class="n">PUT_LINE</span><span class="p">(</span><span class="s1">'ì‚½ì… íŠœí”Œì„ BOOK_LOG í…Œì´ë¸”ì— ë°±ì—…'</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">book</span> <span class="k">values</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="s1">'ìŠ¤í¬ì¸  ê³¼í•™ 1'</span><span class="p">,</span> <span class="s1">'ë¯¸ë””ì–´'</span><span class="p">,</span> <span class="mi">25000</span><span class="p">);</span>         <span class="o">//</span> <span class="err">íŠ¸ë¦¬ê±°</span> <span class="err">ë°œë™</span> <span class="err">ì¡°ê±´</span> <span class="err">ìˆ˜í–‰</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">book</span> <span class="k">where</span> <span class="n">bookid</span> <span class="o">=</span> <span class="s1">'16'</span><span class="p">;</span>                                <span class="o">//</span> <span class="err">íŠ¸ë¦¬ê±°</span> <span class="err">ìˆ˜í–‰</span> <span class="err">ì—¬ë¶€</span> <span class="err">í™•ì¸</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">book_log</span> <span class="k">where</span> <span class="n">bookid_1</span><span class="o">=</span><span class="s1">'16'</span><span class="p">;</span>
</code></pre></div></div>
<p><br></p>

<p style="font-size:24px; font-weight:bold;"><span style="background-color:#007433; color:#ffd300;">4. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜</span></p>

<p>ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ëŠ”
ì—¬ëŠ ì–¸ì–´ë“¤ê³¼ ê±°ì˜ ë¹„ìŠ·í•œë‹¤ê³  ëŠê¼ˆë‹¤</p>

<p>ê·¸ë¦¬ ì–´ë µì§„ ì•Šìœ¼ë‹ˆ
ì•„ë˜ êµ¬ë¬¸ì„ ì‚´í´ë³´ë©´ì„œ ì´í•´í•´ë³´ì
â€‹</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">function</span> <span class="n">fnc_interest</span><span class="p">(</span>          <span class="o">//</span> <span class="err">ì‚¬ìš©ì</span> <span class="err">ì •ì˜</span> <span class="err">í•¨ìˆ˜</span> <span class="err">ì„¤ì •</span>
    <span class="n">price</span> <span class="n">number</span><span class="p">)</span> <span class="k">return</span> <span class="nb">int</span>                     
<span class="k">is</span>
    <span class="n">myinterest</span> <span class="n">number</span><span class="p">;</span>
<span class="k">begin</span>
    <span class="n">if</span> <span class="n">price</span> <span class="o">&gt;=</span> <span class="mi">30000</span> <span class="k">then</span> 
        <span class="n">myinterest</span> <span class="p">:</span><span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">myinterest</span> <span class="p">:</span><span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="p">;</span>
    <span class="k">end</span> <span class="n">if</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">myinterest</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">select</span> <span class="n">custid</span><span class="p">,</span> <span class="n">orderid</span><span class="p">,</span> <span class="n">saleprice</span><span class="p">,</span> <span class="n">fnc_interest</span><span class="p">(</span><span class="n">saleprice</span><span class="p">)</span> <span class="n">interest</span> <span class="k">from</span> <span class="n">orders</span><span class="p">;</span>
</code></pre></div></div>

<p>pl/sql ì„ í†µí•´
ë‚´ê°€ ëª¨ë¥´ë˜ sqlì˜ ì„¸ê³„ë¡œ ë°œì„ ë‹´ê·¼ê±° ê°™ì•„ ì‹ ê¸°í•˜ê¸°ë„ í•˜ì§€ë§Œ
ì§ì ‘ í•„ìš”í•œì‹ìœ¼ë¡œ ì§œë³´ë ¤ë©´
ì¡°ê¸ˆ ìµìˆ™í•´ì§ˆ í•„ìš”ê°€ ìˆì„ê²ƒ ê°™ë‹¤ ğŸ˜‚</p>


    <footer>

  dasfef/posts
  <br><br>
   <img class="emoji" title=":octocat:" alt=":octocat:" src="https://github.githubassets.com/images/icons/emoji/octocat.png" height="20" width="20"> <a href="https://github.com/dasfef">@dasfef</a> 
  

</footer>


  </body>
</html>
